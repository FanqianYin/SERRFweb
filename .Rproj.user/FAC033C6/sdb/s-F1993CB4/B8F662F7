{
    "collab_server" : "",
    "contents" : "\n$(function(){\n\n\n\n$(\"#test\").click(function(){\n  var req = ocpu.call(\"ip_summary\",{\n\n\n\n  }, function(sess){\n\n    s = sess\n    sess.getObject(function(obj){\n      o = obj;\n\n      j = JSON.parse(o);\n      $('#world-map').vectorMap({\n        map: 'world_mill',\n        series: {\n          regions: [{\n            values: j,\n            scale: ['#C8EEFF', '#0071A4'],\n            normalizeFunction: 'polynomial'\n          }]\n        },\n        onRegionTipShow: function(e, el, code){\n          el.html(el.html()+' (GDP - '+j[code]+')');\n        }\n      });\n\n    })\n\n  }).fail(function(e){\n    alert(\"Error: \" +req.responseText )\n  })\n})\n\n\n   /*var ipSumm = obj.ip_summ\n            $('#world-map').vectorMap({\n                  map: 'world_mill',\n                  series: {\n                    regions: [{\n                      values: ipSumm,\n                      scale: ['#C8EEFF', '#0071A4'],\n                      normalizeFunction: 'polynomial'\n                    }]\n                  },\n                  onRegionTipShow: function(e, el, code){\n                    el.html(el.html()+' (GDP - '+ipSumm[code]+')');\n                  }\n            });*/\n\n\n\n\n\n\n$(\".navigate\").click(function(){\n\nvar tabcontent;\n tabcontent = document.getElementsByClassName(\"tabcontent\");\n    for (i = 0; i < tabcontent.length; i++) {\n        tabcontent[i].style.display = \"none\";\n    }\n\n  var element = this;\n  document.getElementById(element.id.replace('nav','')).style.display = \"block\";\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$('.uploaded').css('display','none');\n$(\".done\").css('display','none');\n\n$('#input').change(function(){\n\n$('#uploadedText').css('display','inline-block');\n$(\"#uploadedText\").html('<i  class=\"fa fa-spinner fa-spin\" ></i>')\n\n  var req = ocpu.call(\"checkDataFormat\",{\n    input:$(\"#input\")[0].files[0]\n  }, function(sess){\n\n  }).fail(function(e){\n    alert(\"The format is not correct. Please check your data with the example data, especially the red-text cells.\")\n    alert(\"Error: \" +req.responseText )\n    $('.uploaded').css('display','none');\n\n  }).then(function(e){\n    $('.uploaded').css('display','inline-block');\n    $(\"#uploadedText\").html('uploaded')\n  })\n\n\n})\n\n$(\"#apply\").click(function(){\n\n\n  $.getJSON('//freegeoip.net/json/?callback=?', function(data) {\n    var ip = data.ip\n    console.log(ip)\n  $(\"#apply\").prop(\"disabled\", true);\n  $(\"#applyText\").html('<i  class=\"fa fa-spinner fa-spin\" ></i>')\n  $(\".done\").css('display','none');\n  var req = ocpu.call(\"SERRF\",{\n    input:$(\"#input\")[0].files[0],\n    ip:ip\n  }, function(sess){\n\n    sss = sess\n\n    $('#rawpca').attr(\"src\", sess.loc + \"files/rawpca.png\");\n    $('#SERRFpca').attr(\"src\", sess.loc + \"files/SERRFpca.png\");\n    $(\"#download\").click(function(){\n        console.log(\"!\")\n        window.open(sess.loc + \"files/SERRF - results.zip\");\n      })\n\n    sess.getObject(function(obj){\n\n      ooo = obj\n\n\n    $(\"#finishtext\").html('<h3 style=\"text-align: center\";><i class=\"fa fa-thumbs-o-up\" aria-hidden=\"true\"></i> The normalization is finished!</h3>')\n    $(\"#validateSERRF\").text(obj.validateSERRF + \"%\")\n    $(\"#validateraw\").text(obj.validateraw + \"%\")\n    $(\"#count_less_20_SERRF\").text(obj.count_less_20_SERRF)\n    $(\"#count_less_20_raw\").text(obj.count_less_20_raw)\n    $(\"#perc_less_20_SERRF\").text(obj.perc_less_20_SERRF + \"%\")\n    $(\"#perc_less_20_raw\").text(obj.perc_less_20_raw + \"%\")\n\n\n\n\n\n\n\n\n    })\n\n\n\n  }).fail(function(e){\n    alert(\"Error: \"+req.responseText+\". CONTACT ME: slfan@ucdavis.edu\")\n    $(\"#applyText\").html('Apply SERRF normalization')\n    $(\"#apply\").prop(\"disabled\", false);\n\n  }).then(function(e){\n    $(\".done\").css('display','inline-block');\n    $(\"#applyText\").html('Apply SERRF normalization')\n    $(\"#apply\").prop(\"disabled\", false);\n\n  })\n  })\n\n\n\n\n\n})\n\n\n\n\n\n})\n",
    "created" : 1505170712928.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "536815822",
    "id" : "B8F662F7",
    "lastKnownWriteTime" : 1505938216,
    "last_content_update" : 1505938216453,
    "path" : "~/GitHub/SERRFweb/inst/www/local.js",
    "project_path" : "inst/www/local.js",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "js"
}